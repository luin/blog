/*!
 * 漢字標準格式 v3.0.0 | MIT License | css.hanzi.co
 * Han: CSS typography framework optimised for Hanzi
 */
void function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,!0):b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=a.document,d=c.documentElement,e=c.body,f="3.0.0",g=["initCond","renderElem","renderJiya","renderHWS","correctBasicBD","substCombLigaWithPUA"],h=function(a,b){return new h.fn.init(a,b)},i=function(){return arguments[0]&&(this.context=arguments[0]),arguments[1]&&(this.condition=arguments[1]),this};h.fn=h.prototype={version:f,constructor:h,context:e,condition:d,routine:g,init:i,setRoutine:function(a){return Array.isArray(a)&&(this.routine=a),this},render:function(a){var b=this,a=Array.isArray(a)?a:this.routine;return a.forEach(function(a){try{"string"==typeof a?b[a]():Array.isArray(a)&&b[a.shift()].apply(b,a)}catch(c){}}),this}},h.fn.init.prototype=h.fn,h.init=function(){return h.init=h().render()};var j={punct:{base:"[\u2026,.;:!?\u203d_]",sing:"[\u2010-\u2014\u2026]",middle:"[\\/~\\-&\u2010-\u2014_]",open:"['\"\u2018\u201c\\(\\[\xa1\xbf\u2e18\xab\u2039\u201a\u201c\u201e]",close:"['\"\u201d\u2019\\)\\]\xbb\u203a\u201b\u201d\u201f]",end:"['\"\u201d\u2019\\)\\]\xbb\u203a\u201b\u201d\u201f\u203c\u203d\u2047-\u2049,.;:!?]"},biaodian:{base:"[\ufe30\uff0e\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u30fc]",liga:"[\u2014\u2026\u22ef]",middle:"[\xb7\uff3c\uff0f\uff0d\u30a0\uff06\u30fb\uff3f]",open:"[\u300c\u300e\u300a\u3008\uff08\u3014\uff3b\uff5b\u3010\u3016]",close:"[\u300d\u300f\u300b\u3009\uff09\u3015\uff3d\uff5d\u3011\u3017]",end:"[\u300d\u300f\u300b\u3009\uff09\u3015\uff3d\uff5d\u3011\u3017\ufe30\uff0e\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u30fc]"},hanzi:{base:"[\u4e00-\u9fff\u3400-\u4db5\u31c0-\u31e3\u3007\ufa0e\ufa0f\ufa11\ufa13\ufa14\ufa1f\ufa21\ufa23\ufa24\ufa27-\ufa29]|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\udedf]|\ud86d[\udc00-\udf3f]|[\ud86a-\ud86c][\udc00-\udfff]|\ud869[\udf00-\udfff]|\ud86d[\udf40-\udfff]|\ud86e[\udc00-\udc1f]",desc:"[\u2ff0-\u2ffa]",radical:"[\u2f00-\u2fd5\u2e80-\u2ef3]"},latin:{base:"[A-Za-z0-9\xc0-\xff\u0100-\u017f\u0180-\u024f\u2c60-\u2c7f\ua720-\ua7ff\u1e00-\u1eff]",combine:"[\u0300-\u0341\u1dc0-\u1dff]"},ellinika:{base:"[0-9\u0370-\u03ff\u1f00-\u1fff]",combine:"[\u0300-\u0345\u1dc0-\u1dff]"},kirillica:{base:"[0-9\u0400-\u0482\u048a-\u04ff\u0500-\u052f\ua640-\ua66e\ua67e-\ua697]",combine:"[\u0483-\u0489\u2de0-\u2dff\ua66f-\ua67d\ua69f]"},kana:{base:"[\u30a2\u30a4\u30a6\u30a8\u30aa-\u30fa\u3042\u3044\u3046\u3048\u304a-\u3094\u309f\u30ff]|\ud82c[\udc00-\udc01]",small:"[\u3041\u3043\u3045\u3047\u3049\u30a1\u30a3\u30a5\u30a7\u30a9\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u31f0-\u31ff]",combine:"[\u3099-\u309c]",half:"[\uff66-\uff9f]",mark:"[\u30a0\u309d\u309e\u30fb-\u30fe]"},eonmun:{base:"[\uac00-\ud7a3]",letter:"[\u1100-\u11ff\u314f-\u3163\u3131-\u318e\ua960-\ua97c\ud7b0-\ud7fb]",half:"[\uffa1-\uffdc]"},zhuyin:{base:"[\u3105-\u312d\u31a0-\u31ba]",initial:"[\u3105-\u3119\u312a-\u312c\u31a0-\u31a3]",medial:"[\u3127-\u3129]","final":"[\u311a-\u3129\u312d\u31a4-\u31b3\u31b8-\u31ba]",tone:"[\u02d9\u02ca\u02c5\u02c7\u02cb\u02ea\u02eb]",ruyun:"[\u31b4-\u31b7][\u0358\u030d]?"}},k=function(){var a="[\\x20\\t\\r\\n\\f]",b=j.punct.open,c=j.punct.close,d=j.punct.end,e=j.punct.middle,f=j.punct.sing,g=b+"|"+d+"|"+e,h=j.biaodian.open,i=j.biaodian.close,k=j.biaodian.end,l=j.biaodian.middle,m=j.biaodian.liga+"{2}",n=h+"|"+k+"|"+l,o=j.kana.base+j.kana.combine+"?",p=j.kana.small+j.kana.combine+"?",q=j.kana.half,r=j.eonmun.base+"|"+j.eonmun.letter,s=j.eonmun.half,t=j.hanzi.base+"|"+j.hanzi.desc+"|"+j.hanzi.radical+"|"+o,u=j.ellinika.combine,v=j.latin.base+u+"*",w=j.ellinika.base+u+"*",x=j.kirillica.combine,y=j.kirillica.base+x+"*",z=v+"|"+w+"|"+y,A="['\u2019]",B=t+"|("+z+"|"+A+")+",C=j.zhuyin.initial,D=j.zhuyin.medial,E=j.zhuyin.final,F=j.zhuyin.tone+"|"+j.zhuyin.ruyun;return{"char":{punct:{all:new RegExp("("+g+")","g"),open:new RegExp("("+b+")","g"),end:new RegExp("("+d+")","g"),sing:new RegExp("("+f+")","g")},biaodian:{all:new RegExp("("+n+")","g"),open:new RegExp("("+h+")","g"),close:new RegExp("("+i+")","g"),end:new RegExp("("+k+")","g"),liga:new RegExp("("+m+")","g"),group:[new RegExp("("+h+"|"+l+"|"+k+"){2,}","g"),new RegExp("("+m+h+")","g")]},hanzi:{individual:new RegExp("("+t+")","g"),group:new RegExp("("+t+")+","g")},word:new RegExp("("+v+"|"+w+"|"+y+"|"+g+")+","ig"),alphabet:{latin:new RegExp("("+v+")","ig"),ellinika:new RegExp("("+w+")","ig"),kirillica:new RegExp("("+y+")","ig"),kana:new RegExp("("+o+")","g"),smallkana:new RegExp("("+p+")","g"),eonmun:new RegExp("("+r+")","g"),halfeonmun:new RegExp("("+s+")","g")}},jinze:{touwei:new RegExp("("+h+"+)("+B+")("+k+"+)","ig"),tou:new RegExp("("+h+"+)("+B+")","ig"),wei:new RegExp("("+B+")("+k+"+)","ig"),middle:new RegExp("("+B+")("+l+")("+B+")","ig")},zhuyin:{form:new RegExp("^\u02d9?("+C+")?("+D+")?("+E+")?("+F+")?$"),diao:new RegExp("("+F+")","g")},hws:{base:[new RegExp("("+t+")("+z+"|"+b+")","ig"),new RegExp("("+z+"|"+d+")("+t+")","ig")],strict:[new RegExp("("+t+")"+a+"?("+z+"|"+b+")","ig"),new RegExp("("+z+"|"+d+")"+a+"?("+t+")","ig")]},"display-as":{"ja-font-for-hant":["\u67e5 \u67fb","\u555f \u5553","\u9109 \u9115","\u503c \u5024","\u6c61 \u6c5a"],"comb-liga-pua":[["a[\u030d\u0358]","\udb80\udc61"],["e[\u030d\u0358]","\udb80\udc65"],["i[\u030d\u0358]","\udb80\udc69"],["o[\u030d\u0358]","\udb80\udc6f"],["u[\u030d\u0358]","\udb80\udc75"],["\u31b4[\u030d\u0358]","\udb8c\uddb4"],["\u31b5[\u030d\u0358]","\udb8c\uddb5"],["\u31b6[\u030d\u0358]","\udb8c\uddb6"],["\u31b7[\u030d\u0358]","\udb8c\uddb7"]]},"inaccurate-char":[["[\u2022\u2027]","\xb7"],["\u22ef\u22ef","\u2026\u2026"],["\u2500\u2500","\u2014\u2014"],["\u2035","\u2018"],["\u2032","\u2019"],["\u2036","\u201c"],["\u2033","\u201d"]]}}();h.UNICODE=j,h.TYPESET=k,h.UNICODE.cjk=h.UNICODE.hanzi,h.UNICODE.greek=h.UNICODE.ellinika,h.UNICODE.cyrillic=h.UNICODE.kirillica,h.UNICODE.hangul=h.UNICODE.eonmun,h.TYPESET.char.cjk=h.TYPESET.char.hanzi,h.TYPESET.char.alphabet.greek=h.TYPESET.char.alphabet.ellinika,h.TYPESET.char.alphabet.cyrillic=h.TYPESET.char.alphabet.kirillica,h.TYPESET.char.alphabet.hangul=h.TYPESET.char.alphabet.eonmun;var l={id:function(a,b){return(b||c).getElementById(a)},tag:function(a,b){return this.makeArray((b||c).getElementsByTagName(a))},qsa:function(a,b){return this.makeArray((b||c).querySelectorAll(a))},create:function(a,b){var a="!"===a?c.createDocumentFragment():""===a?c.createTextNode(b||""):c.createElement(a);try{b&&(a.className=b)}catch(d){}return a},clone:function(a,b){return a.cloneNode(b||!0)},remove:function(a,b){return(b||a.parentNode).removeChild(a)},setAttr:function(a,b){var c=b.length;if("object"==typeof b){if("object"==typeof b[0]&&"name"in b[0])for(var d=0;c>d;d++)void 0!==b[d].value&&a.setAttribute(b[d].name,b[d].value);else for(var e in b)b.hasOwnProperty(e)&&void 0!==b[e]&&a.setAttribute(e,b[e]);return a}},isIgnorable:function(a){return"WBR"===a.nodeName||a.nodeType===Node.COMMENT_NODE},makeArray:function(a){return Array.prototype.slice.call(a)},extend:function(a,b){var c="object"==typeof a||"function"==typeof a||"object"==typeof b;if(c){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}}},m=function(){var a="retain",b="first",d=c,e={}.toString;function f(a){return"[object Array]"==e.call(a)}function g(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function h(){return i.apply(null,arguments)||j.apply(null,arguments)}function i(a,b,c,d,e){if(b&&!b.nodeType&&arguments.length<=2)return!1;var f="function"==typeof c;f&&(c=function(a){return function(b,c){return a(b.text,c.startIndex)}}(c));var g=j(b,{find:a,wrap:f?null:c,replace:f?c:"$"+(d||"&"),prepMatch:function(a,b){if(!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(d>0){var c=a[d];a.index+=a[0].indexOf(c),a[0]=c}return a.endIndex=a.index+a[0].length,a.startIndex=a.index,a.index=b,a},filterElements:e});return h.revert=function(){return g.revert()},!0}function j(a,b){return new k(a,b)}h.Finder=k;function k(b,c){c.portionMode=c.portionMode||a,this.node=b,this.options=c,this.prepMatch=c.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return k.prototype={search:function(){var a,b=0,c=this.options.find,d=this.getAggregateText(),e=[];if(c="string"==typeof c?RegExp(g(c),"g"):c,c.global)while(a=c.exec(d))e.push(this.prepMatch(a,b++));else(a=d.match(c))&&e.push(this.prepMatch(a,0));return e},prepMatch:function(a,b){if(!a[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return a.endIndex=a.index+a[0].length,a.startIndex=a.index,a.index=b,a},getAggregateText:function(){var a=this.options.filterElements;return b(this.node);function b(c){if(3===c.nodeType)return c.data;if(a&&!a(c))return"";var d="";if(c=c.firstChild)do d+=b(c);while(c=c.nextSibling);return d}},processMatches:function(){var a=this.matches,b=this.node,c=this.options.filterElements,d,e,f=[],g=b,h=a.shift(),i=0,j=0,k=0,l,m=[b];a:while(!0){if(3===g.nodeType&&(!e&&g.length+i>=h.endIndex?e={node:g,index:k++,text:g.data.substring(h.startIndex-i,h.endIndex-i),indexInMatch:i-h.startIndex,indexInNode:h.startIndex-i,endIndexInNode:h.endIndex-i,isEnd:!0}:d&&f.push({node:g,index:k++,text:g.data,indexInMatch:i-h.startIndex,indexInNode:0}),!d&&g.length+i>h.startIndex&&(d={node:g,index:k++,indexInMatch:0,indexInNode:h.startIndex-i,endIndexInNode:h.endIndex-i,text:g.data.substring(h.startIndex-i,h.endIndex-i)}),i+=g.data.length),l=1===g.nodeType&&c&&!c(g),d&&e){if(g=this.replaceMatch(h,d,f,e),i-=e.node.data.length-e.endIndexInNode,d=null,e=null,f=[],h=a.shift(),k=0,j++,!h)break}else if(!l&&(g.firstChild||g.nextSibling)){g.firstChild?(m.push(g),g=g.firstChild):g=g.nextSibling;continue}while(!0){if(g.nextSibling){g=g.nextSibling;break}if(g=m.pop(),g===b)break a}}},revert:function(){for(var a=this.reverts.length;a--;)this.reverts[a]();this.reverts=[]},prepareReplacementString:function(a,c,d,e){var f=this.options.portionMode;return f===b&&c.indexInMatch>0?"":(a=a.replace(/\$(\d+|&|`|')/g,function(a,b){var c;switch(b){case"&":c=d[0];break;case"`":c=d.input.substring(0,d.startIndex);break;case"'":c=d.input.substring(d.endIndex);break;default:c=d[+b]}return c}),f===b?a:c.isEnd?a.substring(c.indexInMatch):a.substring(c.indexInMatch,c.indexInMatch+c.text.length))},getPortionReplacementNode:function(a,b,c){var e=this.options.replace||"$&",f=this.options.wrap;if(f&&f.nodeType){var g=d.createElement("div");g.innerHTML=f.outerHTML||(new XMLSerializer).serializeToString(f),f=g.firstChild}if("function"==typeof e)return e=e(a,b,c),e&&e.nodeType?e:d.createTextNode(String(e));var h="string"==typeof f?d.createElement(f):f;return e=d.createTextNode(this.prepareReplacementString(e,a,b,c)),e.data&&h?(h.appendChild(e),h):e},replaceMatch:function(a,b,c,e){var f=b.node,g=e.node,h,i;if(f===g){var j=f;b.indexInNode>0&&(h=d.createTextNode(j.data.substring(0,b.indexInNode)),j.parentNode.insertBefore(h,j));var k=this.getPortionReplacementNode(e,a);return j.parentNode.insertBefore(k,j),e.endIndexInNode<j.length&&(i=d.createTextNode(j.data.substring(e.endIndexInNode)),j.parentNode.insertBefore(i,j)),j.parentNode.removeChild(j),this.reverts.push(function(){h===k.previousSibling&&h.parentNode.removeChild(h),i===k.nextSibling&&i.parentNode.removeChild(i),k.parentNode.replaceChild(j,k)}),k}h=d.createTextNode(f.data.substring(0,b.indexInNode)),i=d.createTextNode(g.data.substring(e.endIndexInNode));for(var l=this.getPortionReplacementNode(b,a),m=[],n=0,o=c.length;o>n;++n){var p=c[n],q=this.getPortionReplacementNode(p,a);p.node.parentNode.replaceChild(q,p.node),this.reverts.push(function(a,b){return function(){b.parentNode.replaceChild(a.node,b)}}(p,q)),m.push(q)}var r=this.getPortionReplacementNode(e,a);return f.parentNode.insertBefore(h,f),f.parentNode.insertBefore(l,f),f.parentNode.removeChild(f),g.parentNode.insertBefore(r,g),g.parentNode.insertBefore(i,g),g.parentNode.removeChild(g),this.reverts.push(function(){h.parentNode.removeChild(h),l.parentNode.replaceChild(f,l),i.parentNode.removeChild(i),r.parentNode.replaceChild(g,r)}),r}},h}(),n="style script",o=function(a,b,c,d,e){return new o.prototype.init(a,b,c,d,e)};o.prototype={constructor:o,selector:"",finder:[],init:function(a,b,c,d,e){return this.selector=a,"string"==typeof b?this.filteredElemList=b:"function"==typeof b&&(this.filterElem=b),"string"==typeof c&&this[c]?this[c](d,e):this},filteredElemList:n,filterElem:function(a){var a=a.nodeName.toLowerCase(),b=this.filteredElemList.split(" "),c=!0;return b.forEach(function(b){return a===b?void(c=!1):void 0}),c},replace:function(a,b){var c=this;return this.finder.push(m(this.selector,{find:a,replace:b,filterElements:function(a){return c.filterElem(a)}})),this},wrap:function(a,b){var c=this;return c.finder.push(m(c.selector,{find:a,wrap:b,filterElements:function(a){return c.filterElem(a)}})),this},revert:function(a){var b=this.finder.length,a=Number(a)||0===a?Number(a):"all"===a?b:1;if("undefined"==typeof b||0===b)return this;a>this.finder.length&&(a=b);for(var c=parseInt(a);c>0;c--)this.finder.pop().revert();return this},jinzify:function(){var a=this.filteredElemList;return this.filteredElemList+=" jinze",this.replace(k.jinze.touwei,function(a,b){var c=b[0],d=l.create("",c),e=l.create("jinze","touwei");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}).replace(k.jinze.wei,function(a,b){var c=b[0],d=l.create("",c),e=l.create("jinze","wei");return e.appendChild(d),0===a.index?e:""}).replace(k.jinze.tou,function(a,b){var c=b[0],d=l.create("",c),e=l.create("jinze","tou");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}).replace(k.jinze.middle,function(a,b){var c=b[0],d=l.create("",c),e=l.create("jinze","middle");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}),this.filteredElemList=a,this},groupify:function(){return this.wrap(k.char.biaodian.group[0],l.clone(l.create("char_group","biaodian cjk"))).wrap(k.char.biaodian.group[1],l.clone(l.create("char_group","biaodian cjk"))),this},charify:function(a){var a=l.extend({hanzi:"individual",liga:"liga",word:"group",latin:"group",ellinika:"group",kirillica:"group",kana:"none",eonmun:"none"},a||{});return"group"===a.hanzi&&this.wrap(k.char.hanzi.group,l.clone(l.create("char_group","hanzi cjk"))),"individual"===a.hanzi&&this.wrap(k.char.hanzi.individual,l.clone(l.create("char","hanzi cjk"))),("individual"===a.hanzi||"biaodian"===a.hanzi||"liga"===a.liga)&&("none"!==a.hanzi&&this.replace(k.char.biaodian.all,function(a,b){var c=b[0],d=l.create("",c),e="biaodian cjk "+(c.match(k.char.biaodian.open)?"open":c.match(k.char.biaodian.close)?"close end":c.match(k.char.biaodian.end)?"end":""),f=l.create("char",e),g=c.charCodeAt(0).toString(16);return f.setAttribute("unicode",g),f.appendChild(d),f}),this.replace("liga"===a.liga?k.char.biaodian.liga:new RegExp("("+j.biaodian.liga+")","g"),function(a,b){var c=b[0],d=l.create("",c),e=l.create("char","biaodian liga cjk"),f=c.charCodeAt(0).toString(16);return e.setAttribute("unicode",f),e.appendChild(d),e})),"none"!==a.word&&this.wrap(k.char.word,l.clone(l.create("word"))),("none"!==a.latin||"none"!==a.ellinika||"none"!==a.kirillica)&&this.wrap(k.char.punct.all,l.clone(l.create("char","punct"))),"individual"===a.latin&&this.wrap(k.char.alphabet.latin,l.clone(l.create("char","alphabet latin"))),"individual"===a.ellinika&&this.wrap(k.char.alphabet.ellinika,l.clone(l.create("char","alphabet ellinika greek"))),"individual"===a.kirillica&&this.wrap(k.char.alphabet.kirillica,l.clone(l.create("char","alphabet kirillica cyrillic"))),this}},o.prototype.init.prototype=o.prototype,h.find=o,void["replace","wrap","revert","jinzify","charify"].forEach(function(a){h.fn[a]=function(){return this.finder||(this.finder=h.find(this.context)),this.finder[a](arguments[0],arguments[1]),this}});var p={JS_RENDERED_CLASS:"hyu-js-rendered"};function q(a,b){var c=l.create("canvas"),d;return c.width="50",c.height="20",c.style.display="none",e.appendChild(c),d=c.getContext("2d"),d.textBaseline="top",d.font="15px "+b+", sans-serif",d.fillStyle="black",d.strokeStyle="black",d.fillText(a,0,0),[c,d]}function r(a,b,c){var a=a,b=b,c=c||"\u8fadQ",d;try{b=q(c,b||"sans-serif"),a=q(c,a);for(var e=1;20>=e;e++)for(var f=1;50>=f;f++){if("undefined"!==d&&a[1].getImageData(f,e,1,1).data[3]!==b[1].getImageData(f,e,1,1).data[3]){d=!0;break}if(d)break;50!==f||20!==e||d||(d=!1)}return l.remove(b[0]),l.remove(a[0]),b=null,a=null,d}catch(g){return!1}}p.detectFont=r,p.support=function(){var b="Webkit Moz ms".split(" "),f=l.create("_"),g={};function h(a){var c=a.charAt(0).toUpperCase()+a.slice(1),d=(a+" "+b.join(c+" ")+c).split(" "),e;return d.forEach(function(a){"string"==typeof f.style[a]&&(e=!0)}),e||!1}function i(a,b){var c=e||l.create("body"),f=l.create("div"),g=e?f:c,b="function"==typeof b?b:function(){},h,i,j;return h=["<style>",a,"</style>"].join(""),g.innerHTML+=h,c.appendChild(f),e||(c.style.background="",c.style.overflow="hidden",j=d.style.overflow,d.style.overflow="hidden",d.appendChild(c)),i=b(g,a),l.remove(g),e||(d.style.overflow=j),!!i}function j(b,d){var e;return a.getComputedStyle?e=c.defaultView.getComputedStyle(b,null).getPropertyValue(d):b.currentStyle&&(e=b.currentStyle[d]),e}return{ruby:function(){var a=l.create("ruby"),b=l.create("rt"),c=l.create("rp"),e;return a.appendChild(c),a.appendChild(b),d.appendChild(a),e="none"===j(c,"display")||"ruby"===j(a,"display")&&"ruby-text"===j(b,"display")?!0:!1,d.removeChild(a),a=null,b=null,c=null,e}(),fontface:function(){var a;return i('@font-face { font-family: font; src: url("http://"); }',function(b,c){var d=l.qsa("style",b)[0],e=d.sheet||d.styleSheet,f=e?e.cssRules&&e.cssRules[0]?e.cssRules[0].cssText:e.cssText||"":"";a=/src/i.test(f)&&0===f.indexOf(c.split(" ")[0])}),a}(),unicoderange:function(){var a;return i('@font-face{font-family:test-for-unicode-range;src:local(Arial),local("Droid Sans")}@font-face{font-family:test-for-unicode-range;src:local("Times New Roman"),local(Times),local("Droid Serif");unicode-range:U+270C}',function(){a=!p.detectFont("test-for-unicode-range",'Arial, "Droid Sans"',"Q")}),a}(),columnwidth:h("columnWidth"),textemphasis:h("textEmphasis"),writingmode:h("writingMode")}}(),p.initCond=function(a){var a=a||d,b="",c;a.classList.add(p.JS_RENDERED_CLASS);for(var e in p.support)c=(p.support[e]?"":"no-")+e,a.classList.add(c),b+=c+" ";return b};function s(a,b){var a=l.clone(a),b=l.clone(b),c=l.create("rb");return c.appendChild(a),c.appendChild(b),c.setAttribute("annotation",b.textContent),c}function t(a,b){var a=l.clone(a),c=l.create("rb"),d=l.create("zhuyin"),e=l.create("yin"),f=l.create("diao"),g=b.textContent,h,i,j,m;return h=g.replace(k.zhuyin.diao,""),m=h?h.length:0,i=g.replace(h,"").replace(/[\u02C5]/g,"\u02c7").replace(/[\u030D]/g,"\u0358"),j=g.replace(k.zhuyin.form,function(a,b,c){return[a?"S":null,b?"J":null,c?"Y":null].join("")}),f.innerHTML=i,e.innerHTML=h,d.appendChild(e),d.appendChild(f),"RB"===a.nodeName?c.innerHTML=a.innerHTML:c.appendChild(a),c.appendChild(d),l.setAttr(c,{zhuyin:"",diao:i,length:m,form:j}),c}l.extend(p,{renderElem:function(a){this.renderRuby(a),this.renderDecoLine(a),this.renderDecoLine(a,"s, del"),this.renderEm(a)},renderDecoLine:function(a,b){var b=b||"u, ins",c=l.qsa(b,a),d=new RegExp("^("+b.replace(/\,\s?/g,"|")+")$","ig");c.forEach(function(a){var b;do if(b=(b||a).nextSibling,!b)return;while(l.isIgnorable(b));b.nodeName.match(d)&&b.classList.add("adjacent")})},renderEm:function(a,b){var c=b?"qsa":"tag",b=b||"em",d=l[c](b,a);d.forEach(function(a){var b=o(a);p.support.textemphasis||b.jinzify(),b.groupify().charify(p.support.textemphasis?{hanzi:"biaodian",word:"punctuation"}:{latin:"individual",ellinika:"individual",kirillica:"individual"})})},renderRuby:function(a,b){var c=b?"qsa":"tag",b=b||"ruby",d=l[c](b,a),e=b+", rtc",f=l.qsa(e,a);f.forEach(function(a){var b=a.classList;b.contains("pinyin")?b.add("romanization"):b.contains("mps")&&b.add("zhuyin"),b.contains("romanization")&&b.add("annotation")}),d.forEach(function(a){var c=a.classList,d=!p.support.ruby||c.contains("zhuyin")||c.contains("complex")||c.contains("rightangle"),e,f,g,h;d&&(e=l.create("!"),e.appendChild(l.clone(a)),f=l.qsa(b,e)[0],(!p.support.ruby||c.contains("zhuyin"))&&l.tag("rt",f).forEach(function(a){var b=l.create("!"),d=[],e;do{if(e=(e||a).previousSibling,!e||e.nodeName.match(/(rt|rb)/i))break;b.insertBefore(l.clone(e),b.firstChild),d.push(e)}while(!e.nodeName.match(/(rt|rb)/i));b=c.contains("zhuyin")?t(b,a):s(b,a);try{a.parentNode.replaceChild(b,a),d.forEach(function(a){l.remove(a)})}catch(f){}}),(c.contains("complex")||c.contains("rightangle"))&&(g=l.tag("rb",f),!function(b){b&&(l.tag("rt",b).forEach(function(a,b){if(g[b]){var c=t(g[b],a);try{g[b].parentNode.replaceChild(c,g[b])}catch(d){}}}),l.remove(b),a.setAttribute("rightangle",""))}(f.querySelector("rtc.zhuyin")),l.qsa("rtc:not(.zhuyin)",f).forEach(function(a,b){var c=a.classList,d,e;d=e=0,g=l.qsa(0===b?"rb":"rb[span]",f),l.tag("rt",a).forEach(function(a){var f=l.create("!"),h=parseInt(a.getAttribute("rbspan"))||1,i,j;if(d=e,e+=parseInt(h),b>0)for(var k=e-1;k>=d;k--)if(g[k]&&(i=parseInt(g[k].getAttribute("span"))||1,i>h)){j=l.tag("rb",g[k]);for(var m=0,n=j.length;n>m;m++)g.splice(k+m,1,j[m])}for(var k=e-1;k>=d;k--)g[k]&&(f.insertBefore(l.clone(g[k]),f.firstChild),h>1&&k!==d?l.remove(g[k]):(f=s(f,a),l.setAttr(f,{"class":c,span:h,order:b}),g[k].parentNode.replaceChild(f,g[k])))}),l.remove(a)})),h=l.create("hruby"),h.innerHTML=e.firstChild.innerHTML,l.setAttr(h,a.attributes),h.normalize(),a.parentNode.replaceChild(h,a))})}}),h.normalize=p,h.support=p.support,h.detectFont=p.detectFont,h.fn.initCond=function(){return this.condition.classList.add("han-js-rendered"),h.normalize.initCond(this.condition),this},void["Elem","DecoLine","Em","Ruby"].forEach(function(a){var b="render"+a;h.fn[b]=function(a){return h.normalize[b](this.context,a),this}}),l.extend(h.support,{heiti:!0,songti:h.detectFont('"Han Songti"'),"songti-gb":h.detectFont('"Han Songti GB"'),kaiti:h.detectFont('"Han Kaiti"'),fangsong:h.detectFont('"Han Fangsong"')});var u="* > hws:first-child, * > wbr:first-child + hws, wbr:first-child + wbr + hws",v=function(){var a=l.create("div");return a.appendChild(l.create("","0-")),a.appendChild(l.create("","2")),a.normalize(),2!==a.firstChild.length}(),w;w=l.create("hws"),w.innerHTML=" ",l.extend(h,{isNodeNormalizeNormal:v,renderHWS:function(a,b){var a=a||c,d=b?"strict":"base",e=h.find(a);return e.filteredElemList+=b?" textarea code kbd samp pre":" textarea",e.replace(h.TYPESET.hws[d][0],"$1<hws/>$2").replace(h.TYPESET.hws[d][1],"$1<hws/>$2").replace(/(['"]+)<hws\/>(.+?)<hws\/>\1/gi,"$1$2$1").replace("<hws/>",function(){return l.clone(w)}),l.qsa(u,a).forEach(function(a){var b=a.parentNode,c=b.firstChild;while(l.isIgnorable(c))if(c=c.nextSibling,!c)return;while("HWS"===c.nodeName)if(l.remove(c,b),c=b.parentNode.insertBefore(l.clone(w),b),b=b.parentNode,v&&b.normalize(),c!==b.firstChild)break}),v&&a.normalize(),e}}),l.extend(h.fn,{HWS:null,renderHWS:function(a){return h.renderHWS(this.context,a),this.HWS=l.tag("hws",this.context),this},revertHWS:function(){return this.HWS.forEach(function(a){l.remove(a)}),this}}),h.renderJiya=function(a){var a=a||c,b=[h.find(a)];return b[0].filteredElemList+=" textarea code kbd samp pre jinze em",b[0].groupify(),l.qsa("char_group.biaodian",a).forEach(function(a){b.push(h(a).charify({hanzi:"biaodian",liga:"liga",word:"none",latin:"none",ellinika:"none",kirillica:"none"}))}),b},l.extend(h.fn,{jiya:null,renderJiya:function(){return this.jiya=h.renderJiya(this.context),this},revertJiya:function(){try{this.jiya.revert("all")}catch(a){}return this}});var x;x=l.create("char","biaodian cjk middle"),x.setAttribute("unicode","b7"),h.correctBasicBD=function(a,b){var a=a||c,d;(!h.support.unicoderange||b)&&(d=h.find(a),d.filteredElemList+=" em",d.wrap(/\u00B7/g,l.clone(x)).charify({liga:"liga",hanzi:"none",word:"none",latin:"none",ellinika:"none",kirillica:"none"}))},l.extend(h.fn,{basicBD:null,correctBasicBD:function(a){return this.basicBD=h.correctBasicBD(this.context,a),this},revertBasicBD:function(){try{this.basicBD.revert("all")}catch(a){}return this}});var y="rb.romanization[annotation], .romanization rb[annotation]",z=" textarea code kbd samp pre",A=function(){var a=e||l.create("body"),b=l.create("div"),c=l.create("span"),f=e?b:a,g,h,i;return e?e.appendChild(f):(a.style.background="",a.style.overflow="hidden",h=d.style.overflow,d.style.overflow="hidden",d.appendChild(a)),c.innerHTML="&#x0069;&#x030D;",c.style.fontFamily="sans-serif",c.style.display="inline-block",g=l.clone(c),g.style.fontFamily='"Romanization Sans"',f.appendChild(c),f.appendChild(g),i=c.clientWidth!==g.clientWidth,l.remove(f),e||(d.style.overflow=h),i}(),B=h.TYPESET["display-as"]["comb-liga-pua"],C=h.TYPESET["inaccurate-char"],D=l.create("char","comb-liga"),E=l.create("inner");return l.extend(h,{isCombLigaNormal:A,substCombLigaWithPUA:function(a){var a=a||c,b=h.find(a);if(!A)return b.filteredElemList+=z,B.forEach(function(a){b.replace(new RegExp(a[0],"ig"),function(b,c){var d=l.clone(D),e=l.clone(E);return e.innerHTML=c[0],d.appendChild(e),d.setAttribute("display-as",a[1]),0===b.index?d:""})}),l.qsa(y,a).forEach(function(a){var b=a.getAttribute("annotation");B.slice(0,5).forEach(function(a){b=b.replace(new RegExp(a[0],"ig"),a[1])}),a.setAttribute("annotation",b)}),b},substInaccurateChar:function(a){var a=a||c,b=h.find(a);b.filteredElemList+=z,C.forEach(function(a){b.replace(new RegExp(a[0],"ig"),a[1])})}}),l.extend(h.fn,{"comb-liga":null,"inaccurate-char":null,substCombLigaWithPUA:function(){return this["comb-liga"]=h.substCombLigaWithPUA(this.context),this},revertCombLigaWithPUA:function(){try{this["comb-liga"].revert("all")}catch(a){}return this},substInaccurateChar:function(){return this["inaccurate-char"]=h.substInaccurateChar(this.context),this},revertInaccurateChar:function(){try{this["inaccurate-char"].revert("all")}catch(a){}return this}}),a.addEventListener("DOMContentLoaded",function(){var a;d.classList.contains("han-init")?h.init():(a=c.querySelector(".han-init-context"))&&(h.init=h(a).render())}),"function"==typeof define&&define.amd?define(function(){return h}):("undefined"==typeof b||b===!1)&&(a.Han=h),h});
