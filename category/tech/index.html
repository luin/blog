<!DOCTYPE html>
<html lang="zh-Hans" xmlns:wb="http://open.weibo.com/wb">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Zihua Li - tech</title>
      <link href="http://zihua.li/feed" type="application/rss+xml" rel="alternate" title="Zihua Li RSS Feed" />
    <link rel='stylesheet'  href='http://zihua.li/theme/han/han.css' type='text/css' media='all' />
    <link rel='stylesheet'  href='http://zihua.li/theme/css/style.css' type='text/css' media='all' />
    <link rel='stylesheet'  href='http://zihua.li/theme/css/highlight.css' type='text/css' media='all' />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="author" href="https://plus.google.com/107380206942623407058/posts" />
    <!--[if lt IE 9]> <script src="http://zihua.li/theme/js/vendor/html5shiv.js"></script> <![endif]-->
</head>
<body>
  <section class="l-cover">
    <header id="banner" class="body">
      <div class="header-avatar"><a href="http://zihua.li/"><img src="http://zihua.li/theme/images/avatar.png" width="64" height="64" alt="" /></a></div>
      <h1 class="site-name"><a href="http://zihua.li/">Zihua Li</a></h1>
      <p class="description">
        美工、全栈码农（Web, iOS）<br>90 后，法号 Luin<br />
        [<a href="http://zihua.li/pages/about/">关于</a>, <a href="http://zihua.li/pages/novel/">小说</a>]
      </p>
      <ul class="social-links">
        <li><a href="https://twitter.com/luinlee">Twitter</a></li>
        <li><a href="https://github.com/luin">GitHub</a></li>
        <li><a href="http://dribbble.com/luin">Dribbble</a></li>
      </ul>
    </header>
  </section>
  <section class="l-content">
    <div class="inner">
  <article class="index-article han-init-context">
    <header>
      <a href="http://zihua.li/2015/01/implement-pure-css-game/">
        <h2 class="article-title">
          纯 CSS 实现打地鼠游戏
        </h2>
      </a>
      <p class="article-meta" title="2015-01-17T00:00:00+01:00">17 Jan 2015</p>
    </header>
    <div class="typo article-body">
      <p>只借助 CSS 而不使用 JavaScript 来实现一个网页游戏并不需要什么新潮的技术，简单的几个选择器组合就能创造出意想不到的效果，再配合上 CSS3 的“绘图”能力，甚至可以做出不逊于 JavaScript 实现的网页游戏。</p>
<p>为了参加公司内的 CSS3 比赛，我连夜做了一个 CSS3 打地鼠游戏（其实准备时间挺长的，但是报了个名就忘记这回事了，交稿前两天被人提醒才想起来），如下：</p>
<p><img src="http://zihua.li/images/2015-01-17_implement-pure-css-game/game.png" alt="游戏截图" class="fill" /></p>
<p>进入游戏后，首先会有个开始按钮，点击开始后，游戏开始倒计时，同时不断地有地鼠从洞里钻出来，用鼠标点击地鼠即可得分（总分显示在顶部的记分板上）。15秒后游戏结束，同时显示结束页面。</p>
<p>项目代码放在 <a href="https://github.com/luin/Hits-the-mole">GitHub</a> 上，也可以访问<a href="http://luin.github.io/Hits-the-mole/">在线 Demo</a>试玩。</p>
<p>这篇日志将介绍实现这个游戏的过程中我认为比较有意思的几个地方。</p>

    </div>
    <div class="read-more clearfix">
      <a class="button radius secondary small right" href="http://zihua.li/2015/01/implement-pure-css-game/">阅读全文</a>
      <a class="button radius secondary small right" href="http://zihua.li/2015/01/implement-pure-css-game/#disqus_thread">评论</a>
    </div>
    <div class="hr"></div>
  </article>
  <article class="index-article han-init-context">
    <header>
      <a href="http://zihua.li/2014/11/talk-about-codegame/">
        <h2 class="article-title">
          Code Game 对技术的选取
          <span class="article-subtitle">兼谈为何不应该用 CoffeeScript 与 Less</span>
        </h2>
      </a>
      <p class="article-meta" title="2014-11-07T00:00:00+01:00">07 Nov 2014</p>
    </header>
    <div class="typo article-body">
      <p>这篇日志将以偏技术的角度介绍我最近在做的业余项目 Code Game，其中我会解释 Code Game 对某些技术是如何进行取舍的，包括为什么不使用 CoffeeScript 以及选择 Myth 代替 Less/Sass 的原因。</p>

    </div>
    <div class="read-more clearfix">
      <a class="button radius secondary small right" href="http://zihua.li/2014/11/talk-about-codegame/">阅读全文</a>
      <a class="button radius secondary small right" href="http://zihua.li/2014/11/talk-about-codegame/#disqus_thread">评论</a>
    </div>
    <div class="hr"></div>
  </article>
  <article class="index-article han-init-context">
    <header>
      <a href="http://zihua.li/2014/06/implement-instagram-like-filters/">
        <h2 class="article-title">
          只需 4 步，手把手教你如何实现滤镜功能
        </h2>
      </a>
      <p class="article-meta" title="2014-06-15T00:00:00+02:00">15 Jun 2014</p>
    </header>
    <div class="typo article-body">
      <p>滤镜对于照片而言，起到的是雪中送炭和锦上添花的作用。优秀的滤镜，能让随手之作显得别有风味，又能为已经绝色的照片画龙点睛。现在几乎凡是和照片相关的应用程序都有滤镜功能，而相较而言介绍滤镜原理和实现的文章又少之又少，为此我专门写了这篇文章来系统地讲解滤镜是如何实现的。</p>
<h2>什么是滤镜</h2>
<p>滤镜最初是指安装在相机镜头前过滤自然光的附加镜头，用来实现调色和添加效果。一些数字图像处理软件（最著名的如 Adobe Photoshop）提供了一些特定的预设工具用来实现相机滤镜的效果，这些工具也就自然而然地被称作“滤镜”。软件实现的滤镜可以模拟大部分的镜头滤镜，如色温变换滤镜（LB）和强调滤镜等，但由于无法再现拍摄环境，软件滤镜无法复原照片中未包含的信息，进而也难以实现偏光镜和紫外线滤色镜（UV）的效果。</p>
<p><img src="http://zihua.li/images/2014-06-15_implement-instagram-like-filters/lens-collection.jpg" alt="相机滤镜" class="fill" /></p>

    </div>
    <div class="read-more clearfix">
      <a class="button radius secondary small right" href="http://zihua.li/2014/06/implement-instagram-like-filters/">阅读全文</a>
      <a class="button radius secondary small right" href="http://zihua.li/2014/06/implement-instagram-like-filters/#disqus_thread">评论</a>
    </div>
    <div class="hr"></div>
  </article>
  <article class="index-article han-init-context">
    <header>
      <a href="http://zihua.li/2014/05/good-practices-to-structure-an-express-app/">
        <h2 class="article-title">
          Good Practices to Structure an Express App
        </h2>
      </a>
      <p class="article-meta" title="2014-05-21T00:00:00+02:00">21 May 2014</p>
    </header>
    <div class="typo article-body">
      <p>Having heavily used the <a href="http://expressjs.com">Express</a> framework for 3 years, I’ve discovered a few patterns and conventions to structure an Express app. These patterns make my code significantly cleaner and easier to follow. Here they are.</p>
<h2>1. RESTful Routes</h2>
<p>While there are many ways we can set up routes, the most important thing to keep in mind is to put the URL definition and its routes (i.e. middlewares) in the same place.</p>
<p>When writing code like <code>app.get('/users', require('./routes').getUsers)</code>, you are actually making your application fragmented instead of modular because the coupling between a URL and it's route is in fact relatively high.</p>
<p>For example, when making some changes on the <a href="http://expressjs.com/4x/api.html#req.params">named parameter</a> of the URL, you have to alter the route accordingly. If the url and the route definition are in different places, it takes more time to find them and change them both during development.</p>
<p>To modularize my Express app, what I do instead is to separate the routes by resources. In RESTful programming, a resource is similar to an object instance in an object-oriented programming language. The coupling between resources is low and each resource is relatively self-contained, which means they can be separated naturally.</p>

    </div>
    <div class="read-more clearfix">
      <a class="button radius secondary small right" href="http://zihua.li/2014/05/good-practices-to-structure-an-express-app/">阅读全文</a>
      <a class="button radius secondary small right" href="http://zihua.li/2014/05/good-practices-to-structure-an-express-app/#disqus_thread">评论</a>
    </div>
    <div class="hr"></div>
  </article>
  <article class="index-article han-init-context">
    <header>
      <a href="http://zihua.li/2014/03/test-private-methods-in-nodejs/">
        <h2 class="article-title">
          在 Node.js 中测试模块的内部成员
        </h2>
      </a>
      <p class="article-meta" title="2014-03-27T00:00:00+01:00">27 Mar 2014</p>
    </header>
    <div class="typo article-body">
      <p>模块（Module）的内部成员是指没有通过 <code>module.exports</code> 导出的变量或函数。如下面的示例模块：</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// 执行某些操作</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">B</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">A</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>


<p>其中函数 <code>A</code> 就是该模块的内部成员，而命名函数表达式（Named Function Expression） <code>B</code> 则是该模块的公开成员。绝大多数情况下，单元测试只关注模块的公开成员，这是因为公开成员代表着模块的接口与功能，而内部成员则与模块的具体实现相关。对模块的内部成员进行测试，意味着测试代码需要了解模块的实现细节，导致测试代码与实现代码高度耦合，进而阻碍日后对代码的重构，这显然违背了单元测试的本意。而且实践 TDD 时，测试先于实现，更谈不上对模块的实现细节进行测试了。</p>
<p>然而凡事都有例外，实践时并不能百分之百地保证测试代码不需要直接访问模块内部成员。下面本文将就两种情况对如何测试模块内部成员进行介绍。</p>

    </div>
    <div class="read-more clearfix">
      <a class="button radius secondary small right" href="http://zihua.li/2014/03/test-private-methods-in-nodejs/">阅读全文</a>
      <a class="button radius secondary small right" href="http://zihua.li/2014/03/test-private-methods-in-nodejs/#disqus_thread">评论</a>
    </div>
    <div class="hr"></div>
  </article>
<p class="paginator">
    1 / 6
        <a class="next-page" href="http://zihua.li/category/tech/page/2/">&gt;</a>
</p>

<script type="text/javascript">
var disqus_shortname = 'zihuali';
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
    </div>
  </section>
  <script src="http://zihua.li/theme/han/han.js"></script>
  <script>
  </script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-46124852-1', 'zihua.li');
    ga('send', 'pageview');
  </script>
</body>
</html>